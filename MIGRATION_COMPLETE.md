# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è Shop ‚Üí Bot –ó–ê–í–ï–†–®–ï–ù–ê

## üéâ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### Backend (100% –∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- ‚úÖ **–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∞**
  - –ú–æ–¥–µ–ª—å Shop –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ Bot
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ BotManager –¥–ª—è —Å–≤—è–∑–∏ –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º
  - Dialog –∏—Å–ø–æ–ª—å–∑—É–µ—Ç botId –≤–º–µ—Å—Ç–æ shopId
  
- ‚úÖ **–í—Å–µ API –º–∞—Ä—à—Ä—É—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã**
  - `/shops/*` ‚Üí `/bots/*`
  - –ù–æ–≤—ã–π API `/bot-manager/*` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º–∏
  - dialog.routes.ts –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω
  - admin.routes.ts –æ–±–Ω–æ–≤–ª–µ–Ω
  - auth.routes.ts –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å
  
- ‚úÖ **–°–µ—Ä–≤–∏—Å—ã –∏ real-time**
  - botManager.ts —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Bot –º–æ–¥–µ–ª—å—é
  - messageHandler.ts –∏—Å–ø–æ–ª—å–∑—É–µ—Ç botId
  - Socket.IO —Å–æ–±—ã—Ç–∏—è: `join-shop` ‚Üí `join-bot`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### Frontend (100% –∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- ‚úÖ **–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã**
  - `CreateBotForm` - —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞
  - `BotsDashboard` - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞–º–∏
  - `BotsList` - —Å–ø–∏—Å–æ–∫ –±–æ—Ç–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∞
  - `ManagerBotAssignment` - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±–æ—Ç–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
  
- ‚úÖ **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã**
  - `DialogsList` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç botId
  - `ChatWindow` - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å botId
  - `DashboardPage` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç BotsDashboard
  - `AdminPanel` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç BotsList
  - `useSocket` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç join-bot —Å–æ–±—ã—Ç–∏–µ
  
- ‚úÖ **–ú–∞—Ä—à—Ä—É—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã**
  - `/create-shop` ‚Üí `/create-bot`

## üìù –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker
sudo service docker start
docker-compose up -d

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
cd backend
npx prisma generate
npx prisma migrate deploy
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥—É
- [ ] –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±–æ—Ç–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
- [ ] –†–∞–±–æ—Ç–∞ —Å –¥–∏–∞–ª–æ–≥–∞–º–∏
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –±–æ—Ç–∞–º–∏

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### Backend
```bash
cd backend
npm run dev
# –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ http://api.localhost:3000
```

### Frontend
```bash
cd frontend
npm run dev
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ http://web.localhost:5173
```

## üìã –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–í–ª–∞–¥–µ–ª–µ—Ü (OWNER)
    ‚Üì
–°–æ–∑–¥–∞–µ—Ç N –±–æ—Ç–æ–≤
    ‚Üì
–°–æ–∑–¥–∞–µ—Ç –æ–±—â–∏–π –∏–Ω–≤–∞–π—Ç-–∫–æ–¥
    ‚Üì
–ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è
    ‚Üì
–í–ª–∞–¥–µ–ª–µ—Ü –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –±–æ—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä—É
    ‚Üì
–ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –±–æ—Ç–∞–º–∏
```

## ‚ú® –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–ú—É–ª—å—Ç–∏-–±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∞**
   - –û–¥–∏–Ω –≤–ª–∞–¥–µ–ª–µ—Ü –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–æ—Ç–æ–≤
   - –ö–∞–∂–¥—ã–π –±–æ—Ç - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å —Å–æ —Å–≤–æ–∏–º–∏ –¥–∏–∞–ª–æ–≥–∞–º–∏

2. **–ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏**
   - –û–±—â–∏–µ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥—ã (–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –±–æ—Ç–∞–º)
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ/–æ—Ç–∑—ã–≤ –±–æ—Ç–æ–≤
   - –ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –±–æ—Ç—ã

3. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
   - –°–µ–ª–µ–∫—Ç–æ—Ä –±–æ—Ç–æ–≤ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–æ–≤
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### API endpoints
```javascript
// –ë—ã–ª–æ:
GET /shops
POST /shops
GET /shops/:id/dialogs

// –°—Ç–∞–ª–æ:
GET /bots
POST /bots
GET /my-bots
GET /dialogs?botId=xxx
```

### Socket.IO —Å–æ–±—ã—Ç–∏—è
```javascript
// –ë—ã–ª–æ:
socket.emit('join-shop', shopId)

// –°—Ç–∞–ª–æ:
socket.emit('join-bot', botId)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
// –ë—ã–ª–æ:
user.shop
user.ownedShop
user.managedShop

// –°—Ç–∞–ª–æ:
user.bots
user.ownedBots
user.managedBots
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ –Ω–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –±–æ—Ç–æ–≤. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

---

*–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞: 2025-08-13*
*–í—Å–µ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é*