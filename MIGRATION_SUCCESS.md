# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è Shop ‚Üí Bot –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–ê

## üéâ –°—Ç–∞—Ç—É—Å: –†–ê–ó–í–ï–†–ù–£–¢–û –í PRODUCTION

–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 2025-08-13
URL: https://web.gramchat.ru

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –°—Ö–µ–º–∞ Prisma –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- –ú–æ–¥–µ–ª—å Shop –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ Bot
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ BotManager –¥–ª—è —Å–≤—è–∑–∏ –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ production —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

### ‚úÖ Backend API
- –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å /shops –Ω–∞ /bots
- –ù–æ–≤—ã–π API /bot-manager –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- Socket.IO —Å–æ–±—ã—Ç–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã (join-shop ‚Üí join-bot)
- Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π

### ‚úÖ Frontend
- –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç CreateBotForm
- –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç BotsDashboard
- –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç BotsList –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Bot –≤–º–µ—Å—Ç–æ Shop
- –ú–∞—Ä—à—Ä—É—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã (/create-shop ‚Üí /create-bot)

### ‚úÖ Production Deployment
- –ö–æ–¥ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 217.198.6.80
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ –Ω–æ–≤—É—é —Å—Ö–µ–º—É
- –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç: https://web.gramchat.ru
- API —Ä–∞–±–æ—Ç–∞–µ—Ç: https://api.gramchat.ru

## –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–í–ª–∞–¥–µ–ª–µ—Ü (OWNER)
    ‚Üì
–°–æ–∑–¥–∞–µ—Ç N –±–æ—Ç–æ–≤ (–≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞)
    ‚Üì
–°–æ–∑–¥–∞–µ—Ç –æ–±—â–∏–π –∏–Ω–≤–∞–π—Ç-–∫–æ–¥ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
    ‚Üì
–ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥—É
    ‚Üì
–í–ª–∞–¥–µ–ª–µ—Ü –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –±–æ—Ç—ã –º–µ–Ω–µ–¥–∂–µ—Ä—É —á–µ—Ä–µ–∑ BotManager
    ‚Üì
–ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º–∏ –±–æ—Ç–∞–º–∏
```

## –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
- **Shop** ‚Üí **Bot**: –û—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å —Ç–µ–ø–µ—Ä—å Bot
- **User.managedShopId** ‚Üí **BotManager**: –°–≤—è–∑—å –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º
- **Dialog.shopId** ‚Üí **Dialog.botId**: –î–∏–∞–ª–æ–≥–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –±–æ—Ç–∞–º
- **InviteCode.shopId** ‚Üí **InviteCode.botId**: –ò–Ω–≤–∞–π—Ç-–∫–æ–¥—ã –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –±–æ—Ç–∞–º

### API Endpoints
```javascript
// –ë—ã–ª–æ:
GET /shops
POST /shops
GET /shops/:id/dialogs

// –°—Ç–∞–ª–æ:
GET /bots
POST /bots
GET /my-bots
GET /dialogs?botId=xxx
POST /bot-manager/assign
DELETE /bot-manager/remove
```

### Socket.IO Events
```javascript
// –ë—ã–ª–æ:
socket.emit('join-shop', shopId)

// –°—Ç–∞–ª–æ:
socket.emit('join-bot', botId)
```

## –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

‚úÖ Health check API: https://api.gramchat.ru/health
‚úÖ Frontend –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è: https://web.gramchat.ru
‚úÖ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã (Bot, BotManager)
‚úÖ Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Å –Ω–æ–≤–æ–π —Å—Ö–µ–º–æ–π

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∏ –±–æ—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–∞–π—Ç-–∫–æ–¥–æ–≤
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±–æ—Ç–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –¥–∏–∞–ª–æ–≥–∞–º–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (production)
```
gramchat_backend   - 127.0.0.1:3000
gramchat_frontend  - 127.0.0.1:5173
gramchat_postgres  - 127.0.0.1:5432
gramchat_redis     - 127.0.0.1:6379
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- IP –∞–¥—Ä–µ—Å PostgreSQL: 172.18.0.3 (–≤–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏)
- –°—Ö–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —á–µ—Ä–µ–∑ `prisma db push`
- –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ

---

**–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!** üöÄ